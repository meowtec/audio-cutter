(()=>{"use strict";function t(t,e,n){for(let s=0;s<n.length;s++)t.setUint8(e+s,n.charCodeAt(s))}const e="/audio-cutter/vendor/";Object.assign(globalThis,{Mp3LameEncoderConfig:{memoryInitializerPrefixURL:e,TOTAL_MEMORY:1073741824}}),importScripts(`${e}Mp3LameEncoder.min.js`);const n={wav:({channels:e,sampleRate:n})=>{const s=function(e,n,s){const i=new ArrayBuffer(44+2*e.length),a=new DataView(i);return t(a,0,"RIFF"),a.setUint32(4,32+2*e.length,!0),t(a,8,"WAVE"),t(a,12,"fmt "),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,n,!0),a.setUint32(24,s,!0),a.setUint32(28,s*(2*n),!0),a.setUint16(32,2*n,!0),a.setUint16(34,16,!0),t(a,36,"data"),a.setUint32(40,2*e.length,!0),function(t,e,n){for(let s=0;s<n.length;s++,e+=2){let i=n[s];i<0?(i<-1&&(i=-1),i*=32768):(i>1&&(i=1),i*=32767),t.setInt16(e,i,!0)}}(a,44,e),a}(function(t){if(1===t.length)return t[0];const e=t[0],n=t[1],s=e.length+n.length,i=new Float32Array(s);let a=0,o=0;for(;a<s;)i[a++]=e[o],i[a++]=n[o],o++;return i}(e),e.length,n);return new Blob([s],{type:"audio/wav"})},mp3:({channels:t,sampleRate:e})=>{const n=new globalThis.Mp3LameEncoder(e,192);return n.encode(t),n.finish()}};globalThis.addEventListener("message",(t=>{const{type:e,id:s,audioData:i}=t.data;let a;try{const t=n[e];if(!t)throw new Error("Unkown audio encoding");a={id:s,success:!0,data:t(i)}}catch(t){a={id:s,success:!1,message:t.toString()}}postMessage(a)}))})();